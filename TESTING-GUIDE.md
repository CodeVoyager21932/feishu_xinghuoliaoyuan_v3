# 星火小程序功能测试指南

> 最后更新：2025年11月19日
> 当前进度：71.4% (5/7核心任务完成)

---

## 📋 测试前准备

### 1. 打开项目
1. 启动微信开发者工具
2. 导入项目目录：`C:\Users\72998\Desktop\xunfei\miniprogram`
3. 选择"测试号"或输入你的AppID
4. 点击"编译"按钮

### 2. 检查项目结构
确认以下文件存在：
```
miniprogram/
├── pages/
│   ├── index/              ✅ 首页
│   ├── ai-chat/            ✅ AI对话
│   ├── knowledge-graph/    ✅ 知识图谱
│   ├── card-learning/      ✅ 卡片学习
│   ├── hero-gallery/       ✅ 英雄列表
│   └── hero-detail/        ✅ 英雄详情
├── data/
│   ├── heroes.json         ✅ 30位英雄数据
│   ├── events.json         ✅ 历史事件数据
│   ├── cards.json          ✅ 20张卡片数据
│   └── graph.json          ✅ 知识图谱数据
└── utils/
    ├── cache.js            ✅ 缓存工具
    └── error-handler.js    ✅ 错误处理
```

---

## ✅ 功能测试清单

### 测试1：首页功能 (index)

#### 1.1 页面加载
- [ ] 页面正常显示
- [ ] 顶部用户信息栏显示
- [ ] 今日英雄卡片显示
- [ ] 4个功能入口按钮显示
- [ ] 学习统计卡片显示

#### 1.2 今日英雄卡片
- [ ] 显示英雄头像（可能显示占位图）
- [ ] 显示英雄姓名
- [ ] 显示英雄简介
- [ ] 点击卡片能跳转到英雄详情页

**测试步骤**：
1. 打开小程序，查看首页
2. 找到"今日英雄"卡片
3. 点击卡片
4. 应该跳转到英雄详情页

**预期结果**：
- 今日英雄每天不同（基于日期算法）
- 点击后正确跳转

#### 1.3 功能入口按钮
- [ ] 点击"🤖 AI讲解员"跳转到AI对话页
- [ ] 点击"🕸️ 知识图谱"跳转到知识图谱页
- [ ] 点击"🎴 卡片学习"跳转到卡片学习页
- [ ] 点击"🦸 英雄长廊"跳转到英雄列表页

**测试步骤**：
1. 依次点击4个功能按钮
2. 确认每个按钮都能正确跳转

#### 1.4 打卡功能
- [ ] 点击"打卡"按钮
- [ ] 显示打卡成功提示
- [ ] 按钮变为"已打卡"状态
- [ ] 再次点击不能重复打卡

---

### 测试2：AI对话功能 (ai-chat)

#### 2.1 页面加载
- [ ] 页面正常显示
- [ ] 顶部显示"星火同志"头像和名称
- [ ] 显示欢迎消息
- [ ] 底部输入框和发送按钮显示

#### 2.2 普通对话模式
**测试步骤**：
1. 在输入框输入："南昌起义是什么时候？"
2. 点击发送按钮
3. 观察AI回复

**预期结果**：
- [ ] 用户消息显示在右侧（蓝色气泡）
- [ ] 显示"思考中..."加载动画
- [ ] AI回复显示在左侧（白色气泡）
- [ ] 回复内容准确（如果配置了API）

**注意**：如果未配置讯飞星火API，会显示错误提示，这是正常的。

#### 2.3 英雄对话模式
**测试步骤**：
1. 点击顶部"切换英雄"按钮
2. 弹出英雄选择窗口
3. 选择"雷锋"
4. 输入："你好，雷锋同志"
5. 点击发送

**预期结果**：
- [ ] 英雄选择弹窗正常显示
- [ ] 显示6位英雄：雷锋、焦裕禄、冷云、赵一曼、黄继光、邱少云
- [ ] 选择后顶部显示切换为对应英雄
- [ ] AI以英雄身份回复（如果配置了API）

#### 2.4 对话历史
- [ ] 对话记录保存在页面上
- [ ] 滚动到最新消息
- [ ] 退出页面再进入，历史记录仍在

---

### 测试3：知识图谱功能 (knowledge-graph)

#### 3.1 页面加载
- [ ] 页面正常显示
- [ ] 顶部筛选栏显示
- [ ] 图谱画布显示
- [ ] 节点和连线正常渲染

#### 3.2 图谱显示
**测试步骤**：
1. 进入知识图谱页面
2. 观察图谱布局

**预期结果**：
- [ ] 显示多个历史事件节点
- [ ] 节点按时间轴从左到右排列
- [ ] 节点之间有连线
- [ ] 节点显示事件名称

#### 3.3 交互功能
**测试步骤**：
1. 点击任意节点
2. 观察高亮效果
3. 查看底部详情卡片

**预期结果**：
- [ ] 点击的节点高亮显示
- [ ] 相关节点和连线高亮
- [ ] 非相关节点变暗
- [ ] 底部弹出详情卡片
- [ ] 详情卡片显示事件信息

#### 3.4 筛选功能
**测试步骤**：
1. 点击顶部"革命时期"按钮
2. 观察图谱变化
3. 切换到其他时期

**预期结果**：
- [ ] 筛选按钮高亮
- [ ] 图谱只显示对应时期的节点
- [ ] 切换流畅无卡顿

#### 3.5 缩放和拖拽
- [ ] 双指缩放图谱（或鼠标滚轮）
- [ ] 拖拽画布移动视图
- [ ] 拖拽节点改变位置

---

### 测试4：卡片学习功能 (card-learning)

#### 4.1 页面加载
- [ ] 页面正常显示
- [ ] 顶部进度条显示
- [ ] 中央显示卡片
- [ ] 底部操作按钮显示

#### 4.2 卡片显示
**测试步骤**：
1. 进入卡片学习页面
2. 观察卡片内容

**预期结果**：
- [ ] 卡片显示正面内容（标题）
- [ ] 卡片有精美的样式
- [ ] 进度条显示当前进度（如：1/20）

#### 4.3 卡片翻转
**测试步骤**：
1. 点击卡片
2. 观察翻转动画

**预期结果**：
- [ ] 卡片执行3D翻转动画
- [ ] 翻转后显示背面内容（详细说明）
- [ ] 再次点击翻转回正面

#### 4.4 左滑操作（不认识）
**测试步骤**：
1. 在卡片上向左滑动
2. 或点击底部"❌ 待复习"按钮

**预期结果**：
- [ ] 卡片向左飞出屏幕
- [ ] 显示下一张卡片
- [ ] 该卡片被标记为"待复习"
- [ ] 统计数据更新

#### 4.5 右滑操作（已掌握）
**测试步骤**：
1. 在卡片上向右滑动
2. 或点击底部"✅ 已掌握"按钮

**预期结果**：
- [ ] 卡片向右飞出屏幕
- [ ] 显示星火动画效果
- [ ] 显示下一张卡片
- [ ] 该卡片被标记为"已掌握"
- [ ] 统计数据更新

#### 4.6 学习统计
**测试步骤**：
1. 学习几张卡片
2. 查看顶部统计信息

**预期结果**：
- [ ] 显示已掌握数量
- [ ] 显示待复习数量
- [ ] 显示总卡片数量
- [ ] 数据实时更新

#### 4.7 AI详解功能
**测试步骤**：
1. 翻转卡片到背面
2. 点击"AI详解"按钮

**预期结果**：
- [ ] 跳转到AI对话页面
- [ ] 自动发送卡片标题作为问题

---

### 测试5：英雄长廊功能 (hero-gallery)

#### 5.1 页面加载
- [ ] 页面正常显示
- [ ] 顶部筛选栏显示5个选项
- [ ] 英雄列表正常显示
- [ ] 显示30位英雄

#### 5.2 英雄列表显示
**测试步骤**：
1. 进入英雄长廊页面
2. 滚动查看列表

**预期结果**：
- [ ] 每个英雄卡片显示：
  - 头像（可能是占位图）
  - 姓名
  - 称号
  - 简介
  - 生卒年份
  - 时代标签
- [ ] 列表可以滚动
- [ ] 卡片样式精美

#### 5.3 筛选功能
**测试步骤**：
1. 点击"革命时期"按钮
2. 观察列表变化
3. 依次测试其他筛选选项

**预期结果**：
- [ ] 点击"全部"：显示30位英雄
- [ ] 点击"革命时期"：显示革命时期英雄（如毛泽东、周恩来、刘胡兰等）
- [ ] 点击"建设时期"：显示建设时期英雄（如雷锋、焦裕禄、王进喜等）
- [ ] 点击"改革时期"：显示改革时期英雄（如袁隆平、孔繁森等）
- [ ] 点击"新时代"：显示新时代英雄（如杨利伟、钟南山、张桂梅等）
- [ ] 筛选按钮高亮显示
- [ ] 切换流畅

#### 5.4 点击英雄卡片
**测试步骤**：
1. 点击任意英雄卡片
2. 观察跳转

**预期结果**：
- [ ] 跳转到英雄详情页
- [ ] 显示对应英雄的详细信息

---

### 测试6：英雄详情功能 (hero-detail)

#### 6.1 页面加载
- [ ] 页面正常显示
- [ ] 顶部显示英雄基本信息
- [ ] 显示生平事迹
- [ ] 显示主要贡献
- [ ] 显示名言警句（如果有）
- [ ] 底部显示操作按钮

#### 6.2 详情内容显示
**测试步骤**：
1. 从英雄列表进入任意英雄详情
2. 查看页面内容

**预期结果**：
- [ ] 顶部渐变背景（红色）
- [ ] 显示英雄头像
- [ ] 显示姓名、称号、生卒年、时代标签
- [ ] 生平事迹文字详细
- [ ] 主要贡献以彩色标签形式展示
- [ ] 名言警句以引号样式展示
- [ ] 页面可以滚动

#### 6.3 与英雄对话功能
**测试步骤**：
1. 在英雄详情页
2. 点击底部"与英雄对话"按钮

**预期结果**：
- [ ] 跳转到AI对话页面
- [ ] 自动切换为该英雄的对话模式
- [ ] 顶部显示英雄名称

#### 6.4 分享功能
**测试步骤**：
1. 点击"分享英雄"按钮

**预期结果**：
- [ ] 显示"分享功能开发中"提示

#### 6.5 测试多个英雄
**建议测试的英雄**：
- [ ] 雷锋（建设时期）
- [ ] 毛泽东（革命时期）
- [ ] 袁隆平（改革时期）
- [ ] 钟南山（新时代）
- [ ] 黄文秀（新时代）

---

## 🔄 完整流程测试

### 流程1：从首页到英雄详情
1. 打开小程序 → 首页
2. 点击"今日英雄"卡片
3. 查看英雄详情
4. 点击"与英雄对话"
5. 进入AI对话页面

**预期**：整个流程流畅，无报错

### 流程2：英雄长廊浏览
1. 首页 → 点击"🦸 英雄长廊"
2. 查看英雄列表
3. 点击"革命时期"筛选
4. 点击"毛泽东"卡片
5. 查看详情
6. 返回列表
7. 切换到"新时代"筛选
8. 点击"钟南山"卡片

**预期**：筛选和跳转都正常

### 流程3：卡片学习完整流程
1. 首页 → 点击"🎴 卡片学习"
2. 查看第一张卡片
3. 点击翻转查看背面
4. 右滑标记为"已掌握"
5. 查看第二张卡片
6. 左滑标记为"待复习"
7. 继续学习5张卡片
8. 查看统计数据

**预期**：滑动流畅，统计准确

### 流程4：知识图谱探索
1. 首页 → 点击"🕸️ 知识图谱"
2. 观察图谱布局
3. 点击"中共一大"节点
4. 查看详情卡片
5. 点击"AI详解"按钮
6. 跳转到AI对话

**预期**：交互流畅，跳转正确

---

## 📊 数据验证

### 验证1：英雄数据完整性
打开 `miniprogram/data/heroes.json`，检查：
- [ ] 共有30条英雄数据
- [ ] 每个英雄包含：id, name, birth_year, era, title, avatar, brief, biography, main_deeds, famous_quotes
- [ ] 时代分布：
  - 革命时期：约10位
  - 建设时期：约10位
  - 改革时期：约5位
  - 新时代：约5位

### 验证2：卡片数据完整性
打开 `miniprogram/data/cards.json`，检查：
- [ ] 共有20张卡片
- [ ] 每张卡片包含：id, front_title, front_image, back_content, back_keywords, difficulty, category

### 验证3：知识图谱数据完整性
打开 `miniprogram/data/graph.json`，检查：
- [ ] nodes数组有50个节点
- [ ] edges数组有100条边
- [ ] 节点包含：id, type, label, year, description

---

## ⚠️ 已知问题

### 1. 图片资源缺失
**现象**：英雄头像、图标等显示为占位图或加载失败

**原因**：图片资源未准备

**影响**：不影响功能测试，仅影响视觉效果

**解决方案**：后续准备真实图片资源

### 2. 讯飞星火API未配置
**现象**：AI对话返回错误提示

**原因**：未配置API密钥

**影响**：AI对话功能无法正常使用

**解决方案**：
1. 在 `cloud/functions/ai-chat/config.json` 中配置API密钥
2. 或使用模拟数据测试UI

### 3. 云开发环境未初始化
**现象**：云函数调用失败

**原因**：未开通云开发

**影响**：打卡、用户数据等功能无法使用

**解决方案**：在微信开发者工具中开通云开发

---

## ✅ 测试通过标准

### 基础标准（必须通过）
- [ ] 所有页面能正常加载，无白屏
- [ ] 所有按钮能正常点击，无报错
- [ ] 页面跳转正常，无死循环
- [ ] 数据正常显示（即使是占位数据）

### 功能标准（核心功能）
- [ ] 首页显示今日英雄
- [ ] AI对话界面正常（即使API未配置）
- [ ] 知识图谱能正常渲染和交互
- [ ] 卡片学习能正常滑动和翻转
- [ ] 英雄长廊能正常筛选和查看

### 交互标准（用户体验）
- [ ] 动画流畅，无卡顿
- [ ] 点击反馈明显
- [ ] 页面切换自然
- [ ] 样式美观统一

---

## 📝 测试记录模板

```markdown
### 测试日期：2025-11-19
### 测试人员：[你的名字]
### 测试环境：微信开发者工具 / 真机

#### 测试项目：首页功能
- 测试结果：✅ 通过 / ❌ 失败
- 问题描述：[如有问题，详细描述]
- 截图：[如有必要，添加截图]

#### 测试项目：AI对话
- 测试结果：✅ 通过 / ❌ 失败
- 问题描述：[如有问题，详细描述]

#### 测试项目：知识图谱
- 测试结果：✅ 通过 / ❌ 失败
- 问题描述：[如有问题，详细描述]

#### 测试项目：卡片学习
- 测试结果：✅ 通过 / ❌ 失败
- 问题描述：[如有问题，详细描述]

#### 测试项目：英雄长廊
- 测试结果：✅ 通过 / ❌ 失败
- 问题描述：[如有问题，详细描述]

#### 总体评价：
- 完成度：[百分比]
- 主要问题：[列出主要问题]
- 改进建议：[提出改进建议]
```

---

## 🎯 快速测试清单（5分钟版）

如果时间有限，按以下顺序快速测试核心功能：

1. ✅ **首页** (30秒)
   - 打开小程序，查看首页是否正常显示

2. ✅ **今日英雄** (30秒)
   - 点击今日英雄卡片，查看详情页

3. ✅ **英雄长廊** (1分钟)
   - 进入英雄长廊，测试筛选功能，点击一个英雄查看详情

4. ✅ **卡片学习** (1分钟)
   - 进入卡片学习，翻转卡片，左滑/右滑测试

5. ✅ **知识图谱** (1分钟)
   - 进入知识图谱，点击节点，测试交互

6. ✅ **AI对话** (1分钟)
   - 进入AI对话，发送一条消息，切换英雄模式

**预期结果**：所有功能UI正常，交互流畅，无崩溃

---

## 📞 问题反馈

如果测试中发现问题，请记录：
1. 问题描述
2. 复现步骤
3. 预期结果
4. 实际结果
5. 截图（如有）

---

**祝测试顺利！** 🎉
