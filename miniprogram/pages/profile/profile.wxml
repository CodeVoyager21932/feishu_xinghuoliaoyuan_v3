<!-- ä¸ªäººä¸­å¿ƒé¡µé¢ -->
<view class="profile-page">
  <!-- èƒŒæ™¯è£…é¥° -->
  <view class="bg-decoration"></view>

  <!-- é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ (Glassmorphism) -->
  <view class="user-card-glass animate-slide-up">
    <view class="user-info-row">
      <view class="avatar-wrapper">
        <image class="user-avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill" />
        <view class="level-badge">Lv.{{userLevel || 1}}</view>
      </view>
      <view class="user-text">
        <text class="user-name font-serif">{{userInfo.nickName}}</text>
        <text class="user-id">ID: {{userInfo.studentId || 'æœªè®¾ç½®'}}</text>
      </view>
      <view class="edit-btn">
        <text class="icon-edit">âœ</text>
      </view>
    </view>
    
    <!-- æ ¸å¿ƒæ•°æ®æ¦‚è§ˆ -->
    <view class="stats-overview">
      <view class="overview-item">
        <text class="overview-num">{{stats.continuous_days}}</text>
        <text class="overview-label">è¿ç»­æ‰“å¡</text>
      </view>
      <view class="divider-vertical"></view>
      <view class="overview-item">
        <text class="overview-num">{{stats.mastered_cards}}</text>
        <text class="overview-label">æŒæ¡å¡ç‰‡</text>
      </view>
      <view class="divider-vertical"></view>
      <view class="overview-item">
        <text class="overview-num">{{stats.ai_chat_count}}</text>
        <text class="overview-label">AIäº’åŠ¨</text>
      </view>
    </view>
  </view>

  <!-- æˆå°±å¾½ç«  -->
  <view class="section-container animate-slide-up" style="animation-delay: 0.1s;">
    <view class="section-header">
      <text class="section-title font-serif">æˆå°±å¾½ç« </text>
      <view class="section-action">
        <text class="achievement-count">{{unlockedCount}}/{{totalCount}}</text>
        <text class="icon-arrow">â†’</text>
      </view>
    </view>
    <scroll-view class="achievements-scroll" scroll-x enable-flex>
      <view 
        class="achievement-card {{item.unlocked ? 'unlocked' : 'locked'}}"
        wx:for="{{achievements}}"
        wx:key="id"
        bindtap="onAchievementClick"
        data-achievement="{{item}}"
      >
        <view class="achievement-icon-wrapper">
          <text class="achievement-icon">{{item.icon}}</text>
        </view>
        <text class="achievement-name">{{item.name}}</text>
        <view class="progress-bar-mini" wx:if="{{!item.unlocked}}">
          <view class="progress-fill" style="width: {{(item.progress / item.target) * 100}}%"></view>
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- æ‰“å¡æ—¥å† -->
  <view class="section-container animate-slide-up" style="animation-delay: 0.2s;">
    <view class="section-header">
      <text class="section-title font-serif">å­¦ä¹ è¶³è¿¹</text>
    </view>
    <view class="calendar-grid">
      <view class="calendar-header-row">
        <text wx:for="{{['æ—¥','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­']}}" wx:key="*this">{{item}}</text>
      </view>
      <view class="calendar-days-grid">
        <view 
          class="calendar-day {{item.checked ? 'checked' : ''}}"
          wx:for="{{calendarDays}}"
          wx:key="date"
        >
          <text class="day-number">{{item.day}}</text>
          <view class="check-dot" wx:if="{{item.checked}}"></view>
        </view>
      </view>
    </view>
  </view>

  <!-- è®¾ç½®é€‰é¡¹ -->
  <view class="settings-list animate-slide-up" style="animation-delay: 0.3s;">
    <view class="setting-item" bindtap="onClearCache">
      <view class="setting-left">
        <text class="setting-icon">ğŸ—‘ï¸</text>
        <text class="setting-label">æ¸…é™¤ç¼“å­˜</text>
      </view>
      <text class="icon-arrow">â€º</text>
    </view>
    <view class="setting-item" bindtap="onAbout">
      <view class="setting-left">
        <text class="setting-icon">â„¹ï¸</text>
        <text class="setting-label">å…³äºæˆ‘ä»¬</text>
      </view>
      <text class="icon-arrow">â€º</text>
    </view>
  </view>
  
  <!-- åº•éƒ¨ç‰ˆæœ¬å· -->
  <view class="version-info">
    <text>Version 1.0.0 â€¢ æ˜Ÿç«ç‡åŸ</text>
  </view>
</view>
