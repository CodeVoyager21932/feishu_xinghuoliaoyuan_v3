<!--index.wxml-->
<view class="home-page">
  <!-- é¡¶éƒ¨ç”¨æˆ·ä¿¡æ¯ -->
  <view class="header">
    <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" />
    <text class="nickname">{{userInfo.nickName || 'æœªç™»å½•'}}</text>
    <button class="check-in-btn" bindtap="onCheckIn" disabled="{{hasCheckedIn}}">
      <text>{{hasCheckedIn ? 'å·²æ‰“å¡' : 'æ‰“å¡'}}</text>
    </button>
  </view>

  <!-- ä»Šæ—¥è‹±é›„å¡ç‰‡ -->
  <view class="today-hero-card card" bindtap="goToHeroDetail">
    <view class="hero-badge">ä»Šæ—¥è‹±é›„</view>
    <image class="hero-avatar" src="{{todayHero.avatar}}" mode="aspectFill" />
    <view class="hero-info">
      <text class="hero-name">{{todayHero.name}}</text>
      <text class="hero-desc">{{todayHero.brief}}</text>
    </view>
  </view>

  <!-- åŠŸèƒ½å…¥å£ -->
  <view class="function-grid">
    <view class="grid-item" bindtap="goToAIChat">
      <text class="icon-emoji">ğŸ¤–</text>
      <text>AIè®²è§£å‘˜</text>
    </view>
    <view class="grid-item" bindtap="goToGraph">
      <text class="icon-emoji">ğŸ•¸ï¸</text>
      <text>çŸ¥è¯†å›¾è°±</text>
    </view>
    <view class="grid-item" bindtap="goToCards">
      <text class="icon-emoji">ğŸ´</text>
      <text>å¡ç‰‡å­¦ä¹ </text>
    </view>
    <view class="grid-item" bindtap="goToHeroes">
      <text class="icon-emoji">ğŸ¦¸</text>
      <text>è‹±é›„é•¿å»Š</text>
    </view>
  </view>

  <!-- å­¦ä¹ ç»Ÿè®¡ -->
  <view class="stats-card card">
    <text class="stats-title">æˆ‘çš„å­¦ä¹ </text>
    <view class="stats-row">
      <view class="stat-item">
        <text class="stat-value">{{stats.continuous_days}}</text>
        <text class="stat-label">è¿ç»­æ‰“å¡</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.mastered_cards}}</text>
        <text class="stat-label">æŒæ¡å¡ç‰‡</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{stats.ai_chat_count}}</text>
        <text class="stat-label">AIé—®ç­”</text>
      </view>
    </view>
  </view>
</view>
