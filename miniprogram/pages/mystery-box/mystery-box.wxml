<!--pages/mystery-box/mystery-box.wxml-->
<navigation-bar title="æœºå¯†æ¡£æ¡ˆ" showBack="{{true}}" showHome="{{true}}" background="transparent"></navigation-bar>
<view class="mystery-box-page">
  <!-- é¡¶éƒ¨ç§¯åˆ† -->
  <view class="points-header">
    <view class="points-card">
      <text class="points-label">å­¦ä¹ ç§¯åˆ†</text>
      <text class="points-value">{{userPoints}}</text>
    </view>
    <text class="cost-tip">æ¯æ¬¡å¼€å¯æ¶ˆè€— 100 ç§¯åˆ†</text>
  </view>

  <!-- è¡¥ç»™ç®± -->
  <view class="box-container">
    <view class="box-wrapper {{isDrawing ? 'shaking' : ''}}" bindtap="onDrawRelic">
      <view class="box-icon">ğŸ“¦</view>
      <text class="box-hint">{{isDrawing ? 'è§£å¯†ä¸­...' : 'ç‚¹å‡»å¼€å¯æœºå¯†æ¡£æ¡ˆ'}}</text>
    </view>
  </view>

  <!-- ç¨€æœ‰åº¦è¯´æ˜ -->
  <view class="rarity-info">
    <text class="info-title">ä¿¡ç‰©ç¨€æœ‰åº¦</text>
    <view class="rarity-list">
      <view class="rarity-item">
        <view class="rarity-badge ssr">ä¼ è¯´</view>
        <text class="rarity-prob">5%</text>
      </view>
      <view class="rarity-item">
        <view class="rarity-badge sr">ç¨€æœ‰</view>
        <text class="rarity-prob">25%</text>
      </view>
      <view class="rarity-item">
        <view class="rarity-badge r">æ™®é€š</view>
        <text class="rarity-prob">70%</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æŒ‰é’® -->
  <view class="bottom-actions">
    <button class="btn-secondary" bindtap="goToMuseum">
      ğŸ›ï¸ æˆ‘çš„çè—é¦†
    </button>
  </view>
</view>

<!-- ç»“æœå¼¹çª— -->
<view class="result-modal" wx:if="{{showResult}}">
  <view class="result-mask" bindtap="closeResult"></view>
  <view class="result-content">
    <text class="result-title">{{resultIsNew ? 'å‘ç°å†å²è§è¯ç‰©ï¼' : 'é‡å¤ä¿¡ç‰©'}}</text>
    <view class="result-rarity {{resultRelic.rarity}}">{{resultRelic.rarityName}}</view>
    <text class="result-name">{{resultRelic.name}}</text>
    <text class="result-story">{{resultRelic.story}}</text>
    <view class="result-actions">
      <button class="btn-primary" bindtap="closeResult">ç¡®å®š</button>
    </view>
  </view>
</view>
