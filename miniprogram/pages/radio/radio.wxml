<!--pages/radio/radio.wxml-->
<navigation-bar title="çº¢è‰²ç”µå°" showBack="{{true}}" showHome="{{true}}" background="transparent"></navigation-bar>
<view class="radio-page">
  <!-- å¤å¤æ”¶éŸ³æœºå¤´éƒ¨ -->
  <view class="radio-header">
    <view class="radio-frame">
      <view class="frequency-dial">
        <view class="dial-marks">
          <view class="mark" wx:for="{{10}}" wx:key="index"></view>
        </view>
        <view class="dial-pointer"></view>
        <text class="frequency-text">FM 100.0</text>
      </view>
      <text class="radio-title">çº¢è‰²ç”µå°</text>
      <text class="radio-subtitle">Red FM - ä¼ æ‰¿çº¢è‰²åŸºå› </text>
    </view>
  </view>

  <!-- å½“å‰æ’­æ”¾ -->
  <view class="now-playing" wx:if="{{currentAudio}}">
    <view class="playing-card">
      <image class="playing-cover" src="{{currentAudio.coverUrl}}" mode="aspectFill"></image>
      <view class="playing-info">
        <text class="playing-title">{{currentAudio.title}}</text>
        <text class="playing-artist">{{currentAudio.artist}}</text>
        <text class="playing-desc">{{currentAudio.description}}</text>
      </view>
      <view class="playing-controls">
        <button class="control-btn" bindtap="onPrev">â®ï¸</button>
        <button class="control-btn main" bindtap="onTogglePlay">
          {{isPlaying ? 'â¸ï¸' : 'â–¶ï¸'}}
        </button>
        <button class="control-btn" bindtap="onNext">â­ï¸</button>
      </view>
    </view>
  </view>

  <!-- æ’­æ”¾åˆ—è¡¨ -->
  <view class="playlist-section">
    <text class="section-title">ğŸ“» èŠ‚ç›®å•</text>
    
    <view class="playlist">
      <view 
        class="playlist-item {{currentAudio && currentAudio.id === item.id ? 'active' : ''}}"
        wx:for="{{playlist}}"
        wx:key="id"
        bindtap="onPlayAudio"
        data-index="{{index}}"
      >
        <image class="item-cover" src="{{item.coverUrl}}" mode="aspectFill"></image>
        <view class="item-info">
          <text class="item-title">{{item.title}}</text>
          <text class="item-artist">{{item.artist}}</text>
          <view class="item-meta">
            <text class="item-category">{{item.category}}</text>
            <text class="item-duration">{{item.duration}}s</text>
          </view>
        </view>
        <view class="item-status" wx:if="{{currentAudio && currentAudio.id === item.id}}">
          <view class="playing-icon {{isPlaying ? 'animating' : ''}}">
            <view class="bar"></view>
            <view class="bar"></view>
            <view class="bar"></view>
          </view>
        </view>
      </view>
    </view>
  </view>
</view>
